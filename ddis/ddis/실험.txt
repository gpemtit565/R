sopia.var.intvCnt = -1;

sopia.on('message', (e) => {
	if ( e.isCmd || isCmd(e) ) {
		if ( isAdmin(e.author) ) {
			if ( e.message.match(/ë°˜ë³µ\ (ì‚­ì œ|ì œê±°)/g) ) {
				if ( sopia.var.intvCnt >= 0 ) {
					sopia.itv.clear('intv' + (sopia.var.intvCnt--));
					sopia.send("ê°€ì¥ ë§ˆì§€ë§‰ ë°˜ë³µ ì‘ì—…ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤.");
				} else {
					sopia.send("ì œê±°í•  ë°˜ë³µ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.");
				}
			} else if ( e.message.match(/^ë°˜ë³µ/) ) {
				let msg = e.message.replace("ë°˜ë³µ ", "");
				let time = parseInt(msg.match(/^[0-9]+/g)[0], 10);
                
                {    
                if( time === 1,(msg.match(/^[ğŸ’œ]/))) {
                                sopia.itv.add(key, () => {
					sopia.send(ğŸ’œ);
				}, (time * 1000));
					return;                
		}
				if ( 1 =< time =< 59 ) {
					sopia.send("60ì´ˆ ë¯¸ë§Œì€ ë°˜ë³µìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
					return;
				}
                }

				msg = msg.replace(time.toString()+" ", "");


				const key = 'intv' + (++sopia.var.intvCnt);
				sopia.itv.add(key, () => {
					sopia.send(msg);
				}, (time * 1000));
				sopia.send(`ì•ìœ¼ë¡œ ${(time)}ì´ˆ ë§ˆë‹¤ ë°˜ë³µ ì±„íŒ…ì„ ì…ë ¥í•©ë‹ˆë‹¤.`);
			}
    		    } 	
		}
	}
});
